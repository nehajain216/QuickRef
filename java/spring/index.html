



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="My Quick Reference Docs">
      
      
        <link rel="canonical" href="https://nehajain216.github.io/QuickRef/java/spring/">
      
      
        <meta name="author" content="Neha Jain">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    
      
        <title>Spring - Neha QuickRef</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="manifest" href="../../manifest.webmanifest">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#spring-configuration-xml-based-quick-reference" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://nehajain216.github.io/QuickRef/" title="Neha QuickRef" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Neha QuickRef
            </span>
            <span class="md-header-nav__topic">
              
                Spring
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/nehajain216/QuickRef/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    nehajain216/QuickRef
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://nehajain216.github.io/QuickRef/" title="Neha QuickRef" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Neha QuickRef
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/nehajain216/QuickRef/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    nehajain216/QuickRef
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      General
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/tips/" title="Tips" class="md-nav__link">
      Tips
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general/links/" title="Links" class="md-nav__link">
      Links
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Git
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Git
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../git/git-reference/" title="Git Reference" class="md-nav__link">
      Git Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Java
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Java
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hibernate/" title="Hibernate" class="md-nav__link">
      Hibernate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../servlets/" title="Servlets" class="md-nav__link">
      Servlets
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Spring
      </label>
    
    <a href="./" title="Spring" class="md-nav__link md-nav__link--active">
      Spring
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spring-mvc/" title="SpringMVC" class="md-nav__link">
      SpringMVC
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Web Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Web Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../web-development/reactjs/" title="ReactJS" class="md-nav__link">
      ReactJS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/nehajain216/QuickRef/edit/master/docs/java/spring.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="spring-configuration-xml-based-quick-reference">Spring configuration - XML based Quick Reference</h1>
<h2 id="introduction">Introduction</h2>
<ul>
<li>Spring is framework for dependency Injection / Inversion of Control (Dep/IOC)</li>
<li>IoC: Rather than classes taking the control of initializing its dependencies, control will be passed to the container.</li>
<li>IOC contaner will be responsible for initializing resources/beans and injecting them as dependencies.</li>
<li>Dependency Injection helps in removing the hard coded dependencies and also it moves dependency resolution from compile time to run time.</li>
<li>We can use XML/annotaion based configuration to implement dependency injection.</li>
<li>For example, consider 3 tier architecture where we have Servlets ---&gt; services ---&gt; DAO</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<ul>
<li>Maven Dependencies -- Same for all the three approaches (XML, annotation based, java config)</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependencyManagement&gt;</span>
        <span class="nt">&lt;dependencies&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>io.spring.platform<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>platform-bom<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>Brussels-SR4<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
                <span class="nt">&lt;scope&gt;</span>import<span class="nt">&lt;/scope&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/dependencyManagement&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>


<ul>
<li>Create UserController -- By UserController, we mean a servlet here. When servlet is used in web part and rest all (Service and DAO layers are configured using Spring, we still have to use "application context". But, if web layer is using Spring MVC, then application context is created automatically, need not configure is explicitly. </li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="n">UserController</span> <span class="err">{</span>

    <span class="n">private</span> <span class="n">UserService</span> <span class="n">userService</span><span class="p">;</span>

    <span class="k">public</span> <span class="n">void</span> <span class="n">setUserService</span><span class="p">(</span><span class="n">UserService</span> <span class="n">userService</span><span class="p">)</span> <span class="err">{</span>
        <span class="n">this</span><span class="p">.</span><span class="n">userService</span> <span class="o">=</span> <span class="n">userService</span><span class="p">;</span>
    <span class="err">}</span>

    <span class="k">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">getNames</span><span class="p">()</span><span class="err">{</span>
        <span class="k">return</span> <span class="n">userService</span><span class="p">.</span><span class="n">getNames</span><span class="p">();</span>
    <span class="err">}</span>
<span class="err">}</span>
</pre></div>


<ul>
<li>Create UserService</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="n">UserService</span> <span class="err">{</span>
    <span class="n">private</span> <span class="n">UserDAO</span> <span class="n">userDAO</span><span class="p">;</span>

    <span class="k">public</span> <span class="n">UserService</span><span class="p">(</span><span class="n">UserDAO</span> <span class="n">userDAO</span><span class="p">)</span> <span class="err">{</span>
        <span class="n">super</span><span class="p">();</span>
        <span class="n">this</span><span class="p">.</span><span class="n">userDAO</span> <span class="o">=</span> <span class="n">userDAO</span><span class="p">;</span>
    <span class="err">}</span>

    <span class="k">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">getNames</span><span class="p">()</span><span class="err">{</span>

        <span class="k">return</span> <span class="n">userDAO</span><span class="p">.</span><span class="n">getNames</span><span class="p">();</span>
    <span class="err">}</span>
<span class="err">}</span>
</pre></div>


<ul>
<li>Create UserDAO</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="n">UserDAO</span> 
<span class="err">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="k">names</span><span class="p">;</span>
    <span class="k">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">languages</span><span class="p">;</span>
    <span class="nb">int</span> <span class="k">count</span><span class="p">;</span>

     <span class="p">...</span>
    <span class="p">...</span>
    <span class="o">//</span><span class="n">setters</span> <span class="k">and</span> <span class="n">getters</span>

    <span class="k">public</span> <span class="n">void</span> <span class="n">init</span><span class="p">()</span>
    <span class="err">{</span>
        <span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;invoked init() method&quot;</span><span class="p">);</span>
    <span class="err">}</span>

    <span class="k">public</span> <span class="n">void</span> <span class="k">destroy</span><span class="p">()</span>
    <span class="err">{</span>
        <span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;invoked destroy() method&quot;</span><span class="p">);</span>
    <span class="err">}</span>
<span class="err">}</span>
</pre></div>


<ul>
<li>Spring XML based configuration in src/main/resources/applicationContext.xml</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;userDAO&quot;</span> <span class="na">class=</span><span class="s">&quot;demo.UserDAO&quot;</span> <span class="na">init-method=</span><span class="s">&quot;init&quot;</span> <span class="na">destroy-method=</span><span class="s">&quot;destroy&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;userService&quot;</span> <span class="na">class=</span><span class="s">&quot;demo.UserService&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constructor-arg</span> <span class="na">ref=</span><span class="s">&quot;userDAO&quot;</span><span class="nt">&gt;&lt;/constructor-arg&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;userController&quot;</span> <span class="na">class=</span><span class="s">&quot;demo.UserController&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;userService&quot;</span> <span class="na">ref=</span><span class="s">&quot;userService&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
</pre></div>


<ul>
<li>Application Context for XML based</li>
<li>Inside a Spring application are beans, and these beans interact with each other to provide the application services. The interacting beans are also called collaborators, and you can define them using application contexts.</li>
<li>applicationContext.xml is the root context configuration for every web application.</li>
<li>Spring loads applicationContext.xml file and creates the ApplicationContext for the whole application.</li>
<li>There will be only one application context per web application.</li>
<li>If you are not explicitly declaring the context configuration file name in web.xml using the contextConfigLocation param, Spring will search for the applicationContext.xml under WEB-INF folder and throw FileNotFoundException if it could not find this file.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">    public static void main(String[] args) </span>
<span class="err">    {</span>
<span class="err">        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span>
<span class="err">        UserController userController = ctx.getBean(&quot;userController&quot;, UserController.class);</span>
<span class="err">        List&lt;String&gt; names = userController.getNames();</span>
<span class="err">        System.err.println(names);</span>
<span class="err">    }</span>
</pre></div>


<h1 id="spring-configuration-annotation-based-quick-reference">Spring configuration - annotation based Quick Reference</h1>
<ul>
<li>Create UserController</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">@Component</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">UserController</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="n">userService</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nv">@Autowired</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">setUserService</span><span class="p">(</span><span class="n">UserService</span><span class="w"> </span><span class="n">userService</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">userService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getNames</span><span class="p">()</span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="n">getNames</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</pre></div>


<ul>
<li>Create UserService</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">@Component</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">UserDAO</span><span class="w"> </span><span class="n">userDAO</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nv">@Autowired</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">UserService</span><span class="p">(</span><span class="n">UserDAO</span><span class="w"> </span><span class="n">userDAO</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="n">super</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">userDAO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userDAO</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getNames</span><span class="p">()</span><span class="err">{</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">userDAO</span><span class="p">.</span><span class="n">getNames</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</pre></div>


<ul>
<li>Create UserDAO</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">@Component</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">UserDAO</span><span class="w"> </span>
<span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="k">names</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">languages</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="nf">count</span><span class="p">;</span><span class="w"></span>

<span class="w">     </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="o">//</span><span class="n">setters</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">getters</span><span class="w"></span>

<span class="w">    </span><span class="nv">@PostConstruct</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">init</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;invoked init() method&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="nv">@PreDestroy</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="k">destroy</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="ss">&quot;invoked destroy() method&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</pre></div>


<ul>
<li>Spring annotation based configuration in src/main/resources/applicationContext-annotations.xml</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="nt">&lt;context:annotation-config&gt;&lt;/context:annotation-config&gt;</span>
    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&quot;demo&quot;</span><span class="nt">&gt;&lt;/context:component-scan&gt;</span>
</pre></div>


<ul>
<li>Application Context for annotation based</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">    public static void main(String[] args) </span>
<span class="err">    {</span>
<span class="err">        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext-annotations.xml&quot;);</span>
<span class="err">        UserController userController = ctx.getBean(&quot;userController&quot;, UserController.class);</span>
<span class="err">        List&lt;String&gt; names = userController.getNames();</span>
<span class="err">        System.err.println(names);</span>
<span class="err">    }</span>
</pre></div>


<h1 id="spring-configuration-java-config-quick-reference">Spring configuration - java config Quick Reference</h1>
<ul>
<li>
<p>Create UserController, UserService and UserDAO is same as that of annotation based.</p>
</li>
<li>
<p>Spring java config based configuration by creating AppConfig.java class</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><span class="w">    </span><span class="nv">@Configuration</span><span class="w"></span>
<span class="w">    </span><span class="nv">@ComponentScan</span><span class="p">(</span><span class="n">basePackages</span><span class="o">=</span><span class="err">{</span><span class="ss">&quot;demo&quot;</span><span class="err">}</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">AppConfig</span><span class="w"> </span>
<span class="w">    </span><span class="err">{</span><span class="w"></span>

<span class="w">    </span><span class="err">}</span><span class="w"></span>
</pre></div>


<ul>
<li>Application Context for java config</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">    public static void main(String[] args) </span>
<span class="err">    {</span>
<span class="err">        ApplicationContext ctx = new AnnotationConfigApplicationContext(AppConfig.class);</span>
<span class="err">        UserController userController = ctx.getBean(&quot;userController&quot;, UserController.class);</span>
<span class="err">        List&lt;String&gt; names = userController.getNames();</span>
<span class="err">        System.err.println(names);</span>
<span class="err">    }</span>
</pre></div>


<h1 id="spring-jdbc-configuration-using-xml">Spring - JDBC configuration using XML</h1>
<ul>
<li>In Spring JDBC configuration is always preferred using XML</li>
<li>Configuring JDBC connection in XML files</li>
</ul>
<div class="codehilite"><pre><span></span>    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;driverClassName&quot;</span> <span class="na">value=</span><span class="s">&quot;com.mysql.jdbc.Driver&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span> <span class="na">value=</span><span class="s">&quot;jdbc:mysql://localhost:3306/test?useSSL=true&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;root&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;admin&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;jdbcTemplate&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
</pre></div>


<ul>
<li>Create TodoDAO --  TodoController, TodoService remains same, as these layers doesn't get impacted DB configuration. </li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">@Component</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">TodoDAO</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="nv">@Autowired</span><span class="w"></span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">JdbcTemplate</span><span class="w"> </span><span class="n">jdbcTemplate</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Todo</span><span class="w"> </span><span class="n">getTodo</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">todoId</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="k">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;select * from todolist where id=?&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">Todo</span><span class="w"> </span><span class="n">todo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jdbcTemplate</span><span class="p">.</span><span class="n">queryForObject</span><span class="p">(</span><span class="k">sql</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Object</span><span class="err">[]{</span><span class="n">todoId</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TodoRowMapper</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">todo</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">     </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="o">//</span><span class="n">other</span><span class="w"> </span><span class="n">methods</span><span class="w"></span>

<span class="err">}</span><span class="w"></span>
</pre></div>


<h1 id="spring-jdbc-configuration-along-with-transaction-management-using-xml">Spring - JDBC configuration along with Transaction Management using XML</h1>
<div class="codehilite"><pre><span></span>    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;dataSource&quot;</span>
        <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;driverClassName&quot;</span> <span class="na">value=</span><span class="s">&quot;com.mysql.jdbc.Driver&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span>
            <span class="na">value=</span><span class="s">&quot;jdbc:mysql://localhost:3306/addressbook?useSSL=true&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;root&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;admin&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;jdbcTemplate&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;tx:annotation-driven/&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;transactionManager&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
</pre></div>


<ul>
<li>
<p>Note: <tx:annotation-driven/> -- tells that Transaction manager is annotation driven. @Transaction annotation will be used.</p>
</li>
<li>
<p>Create AddressBookDAO which includes @Transaction annotation -- AddressBookService and AddressBookController remains same.
However @Transaction is more preferred in Service Layer (Here AddressBookService) , rather than DAO Layer (here AddressBookDAO)
Without using Spring, if we perform plane JDBC operation then we have to explicitly mention conn.autoCommit(false) and perform the operations and finally conn.commit() or conn.rollback() to be called based on the need.
But, with Spring, if we use @Transaction, it will automatically take care of setting conn.autoCommit(false), conn.commit() or conn.rollback() based on the operation.</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">@Repository</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">AddressBookDAO</span><span class="w"> </span>
<span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">JdbcTemplate</span><span class="w"> </span><span class="n">jdbcTemplate</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nv">@Autowired</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">AddressBookDAO</span><span class="p">(</span><span class="n">JdbcTemplate</span><span class="w"> </span><span class="n">jdbcTemplate</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="n">super</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">jdbcTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jdbcTemplate</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="nv">@Transactional</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Contact</span><span class="w"> </span><span class="n">createContact</span><span class="p">(</span><span class="n">Contact</span><span class="w"> </span><span class="n">contact</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="k">sql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;insert into contacts(name,phonenumber,email,address) values(?,?,?,?)&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="n">PreparedStatementCreator</span><span class="w"> </span><span class="n">psc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PreparedStatementCreator</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="nv">@Override</span><span class="w"></span>
<span class="w">            </span><span class="k">public</span><span class="w"> </span><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">createPreparedStatement</span><span class="p">(</span><span class="n">final</span><span class="w"> </span><span class="k">Connection</span><span class="w"> </span><span class="k">connection</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="k">SQLException</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="n">final</span><span class="w"> </span><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">connection</span><span class="p">.</span><span class="n">prepareStatement</span><span class="p">(</span><span class="k">sql</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="k">Statement</span><span class="p">.</span><span class="n">RETURN_GENERATED_KEYS</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">ps</span><span class="p">.</span><span class="n">setString</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w">  </span><span class="n">contact</span><span class="p">.</span><span class="n">getName</span><span class="p">());</span><span class="w"></span>
<span class="w">                </span><span class="n">ps</span><span class="p">.</span><span class="n">setString</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w">  </span><span class="n">contact</span><span class="p">.</span><span class="n">getPhoneNumber</span><span class="p">());</span><span class="w"></span>
<span class="w">                </span><span class="n">ps</span><span class="p">.</span><span class="n">setString</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w">  </span><span class="n">contact</span><span class="p">.</span><span class="n">getEmail</span><span class="p">());</span><span class="w"></span>
<span class="w">                </span><span class="n">ps</span><span class="p">.</span><span class="n">setString</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">contact</span><span class="p">.</span><span class="n">getAddress</span><span class="p">());</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">ps</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">newly</span><span class="w"> </span><span class="n">generated</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">object</span><span class="w"></span>
<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="n">KeyHolder</span><span class="w"> </span><span class="n">holder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GeneratedKeyHolder</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="n">jdbcTemplate</span><span class="p">.</span><span class="k">update</span><span class="p">(</span><span class="n">psc</span><span class="p">,</span><span class="w"> </span><span class="n">holder</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">contactId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">holder</span><span class="p">.</span><span class="n">getKey</span><span class="p">().</span><span class="n">intValue</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">contact</span><span class="p">.</span><span class="n">setId</span><span class="p">(</span><span class="n">contactId</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">contact</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</pre></div>


<h1 id="spring-jpa-configuration">Spring - JPA configuration</h1>
<ul>
<li>It could be done using XML or java config</li>
</ul>
<h1 id="spring-jpa-configuration-using-xml">Spring - JPA configuration using XML</h1>
<ul>
<li>Maven Dependencies </li>
</ul>
<div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-orm<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>hibernate-entitymanager<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>


<ul>
<li>JPA beans Configuration 
*In Spring, we configure EntityManagerFactory as bean in XML. So we will not require to create any singleton class for EntityManagerFactory. We can directly declare and call "EntityManager" by using @PersistenceContext annotation (sample is give below AddressBookDAO).</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;emf&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;packagesToScan&quot;</span> <span class="na">value=</span><span class="s">&quot;com.nj.addressbook.entities&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;jpaVendorAdapter&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;jpaProperties&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;props&gt;</span>
            <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&quot;hibernate.hbm2ddl.auto&quot;</span><span class="nt">&gt;</span>create-drop<span class="nt">&lt;/prop&gt;</span>
            <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&quot;hibernate.dialect&quot;</span><span class="nt">&gt;</span>org.hibernate.dialect.MySQL5Dialect<span class="nt">&lt;/prop&gt;</span>
         <span class="nt">&lt;/props&gt;</span>
      <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;dataSource&quot;</span>
        <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;driverClassName&quot;</span> <span class="na">value=</span><span class="s">&quot;com.mysql.jdbc.Driver&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span>
            <span class="na">value=</span><span class="s">&quot;jdbc:mysql://localhost:3306/addressbook?useSSL=true&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">value=</span><span class="s">&quot;root&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">value=</span><span class="s">&quot;admin&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;jdbcTemplate&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span><span class="nt">&gt;&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;tx:annotation-driven/&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;transactionManager&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;entityManagerFactory&quot;</span> <span class="na">ref=</span><span class="s">&quot;emf&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>


<ul>
<li>Create AddressBookDAO</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">@Repository</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">AddressBookDAO</span><span class="w"> </span>
<span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="nv">@PersistenceContext</span><span class="w"></span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">EntityManager</span><span class="w"> </span><span class="n">em</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getAllContacts</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="n">createQuery</span><span class="p">(</span><span class="ss">&quot;select c from Contact c&quot;</span><span class="p">,</span><span class="n">Contact</span><span class="p">.</span><span class="k">class</span><span class="p">).</span><span class="n">getResultList</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="nv">@Transactional</span><span class="p">(</span><span class="n">readOnly</span><span class="o">=</span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="n">propagation</span><span class="o">=</span><span class="n">Propagation</span><span class="p">.</span><span class="n">REQUIRED</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Contact</span><span class="w"> </span><span class="n">getContactById</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">Contact</span><span class="p">.</span><span class="k">class</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="nv">@Transactional</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Contact</span><span class="w"> </span><span class="n">createContact</span><span class="p">(</span><span class="n">Contact</span><span class="w"> </span><span class="n">contact</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">{</span><span class="w"></span>
<span class="w">         </span><span class="n">em</span><span class="p">.</span><span class="n">persist</span><span class="p">(</span><span class="n">contact</span><span class="p">);</span><span class="w"></span>
<span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">contact</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</pre></div>


<h1 id="spring-jpa-configuration-using-java-config">Spring - JPA configuration using Java config</h1>
<ul>
<li>
<p>Maven Dependencies will remain same as mentioned in JPA XML configuration.</p>
</li>
<li>
<p>JPA Java Configuration.</p>
</li>
<li>Create AppConfig.java class (class name could be anything, we have named it as "AppConfig" here)</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">@Configuration</span><span class="w"></span>
<span class="nv">@ComponentScan</span><span class="p">(</span><span class="n">basePackages</span><span class="o">=</span><span class="err">{</span><span class="ss">&quot;com.nj.addressbook&quot;</span><span class="err">}</span><span class="p">)</span><span class="w"></span>
<span class="nv">@EnableTransactionManagement</span><span class="w"></span>
<span class="nv">@EnableJpaRepositories</span><span class="p">(</span><span class="n">basePackages</span><span class="o">=</span><span class="err">{</span><span class="ss">&quot;com.nj.addressbook.dao&quot;</span><span class="err">}</span><span class="p">)</span><span class="w"></span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">AppConfig</span><span class="w"> </span>
<span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="nv">@Bean</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="n">DriverManagerDataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DriverManagerDataSource</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">dataSource</span><span class="p">.</span><span class="n">setDriverClassName</span><span class="p">(</span><span class="ss">&quot;com.mysql.jdbc.Driver&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">dataSource</span><span class="p">.</span><span class="n">setUrl</span><span class="p">(</span><span class="ss">&quot;jdbc:mysql://localhost:3306/addressbook?useSSL=true&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">dataSource</span><span class="p">.</span><span class="n">setUsername</span><span class="p">(</span><span class="ss">&quot;root&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">dataSource</span><span class="p">.</span><span class="n">setPassword</span><span class="p">(</span><span class="ss">&quot;admin&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">dataSource</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">     </span><span class="nv">@Bean</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">PlatformTransactionManager</span><span class="w"> </span><span class="n">transactionManager</span><span class="p">(</span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="n">EntityManagerFactory</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entityManagerFactory</span><span class="p">(</span><span class="n">dataSource</span><span class="p">).</span><span class="n">getObject</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JpaTransactionManager</span><span class="p">(</span><span class="n">factory</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">     </span><span class="nv">@Bean</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">LocalContainerEntityManagerFactoryBean</span><span class="w"> </span><span class="n">entityManagerFactory</span><span class="p">(</span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="n">LocalContainerEntityManagerFactoryBean</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LocalContainerEntityManagerFactoryBean</span><span class="p">();</span><span class="w"></span>

<span class="w">            </span><span class="n">HibernateJpaVendorAdapter</span><span class="w"> </span><span class="n">vendorAdapter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HibernateJpaVendorAdapter</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">vendorAdapter</span><span class="p">.</span><span class="n">setGenerateDdl</span><span class="p">(</span><span class="k">Boolean</span><span class="p">.</span><span class="k">TRUE</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">vendorAdapter</span><span class="p">.</span><span class="n">setShowSql</span><span class="p">(</span><span class="k">Boolean</span><span class="p">.</span><span class="k">TRUE</span><span class="p">);</span><span class="w"></span>

<span class="w">            </span><span class="n">factory</span><span class="p">.</span><span class="n">setDataSource</span><span class="p">(</span><span class="n">dataSource</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">factory</span><span class="p">.</span><span class="n">setJpaVendorAdapter</span><span class="p">(</span><span class="n">vendorAdapter</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">factory</span><span class="p">.</span><span class="n">setPackagesToScan</span><span class="p">(</span><span class="ss">&quot;com.nj.addressbook&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">            </span><span class="n">Properties</span><span class="w"> </span><span class="n">jpaProperties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Properties</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">jpaProperties</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="ss">&quot;hibernate.hbm2ddl.auto&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;update&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">factory</span><span class="p">.</span><span class="n">setJpaProperties</span><span class="p">(</span><span class="n">jpaProperties</span><span class="p">);</span><span class="w"></span>

<span class="w">            </span><span class="n">factory</span><span class="p">.</span><span class="n">afterPropertiesSet</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">factory</span><span class="p">.</span><span class="n">setLoadTimeWeaver</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">InstrumentationLoadTimeWeaver</span><span class="p">());</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">factory</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</pre></div>


<ul>
<li>
<p>XML Tag "<tx:annotation-driven/>" is represented as "@EnableTransactionManagement" in javaconfig</p>
</li>
<li>
<p>No change in AddressBookDAO, AddressBookServices and AddressBookController</p>
</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../servlets/" title="Servlets" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Servlets
              </span>
            </div>
          </a>
        
        
          <a href="../spring-mvc/" title="SpringMVC" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                SpringMVC
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 - 2020 Neha Jain
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/nehajain216" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>